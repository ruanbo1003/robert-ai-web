FROM node:18-alpine

WORKDIR /app

RUN mkdir -p /build
COPY . /build


RUN cd /build && npm install && npm run build

RUN cd /app
RUN cp -r /build/public /app/
RUN cp -r /build/.next/standalone/* /app/
RUN cp -r /build/.next/static /app/.next


EXPOSE 3000
ENV PORT 3000

CMD HOSTNAME="0.0.0.0" node server.js
